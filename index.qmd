---
title: "PBC"
format: 
  html:
    page-layout: article
---

:::{.column-page}
![](images/pbc-background.png){width="200%"}
:::


```{=html}

<div class="bg"></div>

<p>This example creates a full page background image. Try to resize the browser window to see how it always will cover the full screen (when scrolled to top), and that it scales nicely on all screen sizes.</p>



```


```{=html}

<div class="t396"><div class="t396__artboard rendered" data-artboard-recid="779059872" data-artboard-screens="320,480,640,960,1200" data-artboard-height="560" data-artboard-valign="center" data-artboard-upscale="grid" data-artboard-height-res-320="601" data-artboard-height-res-480="701" data-artboard-height-res-640="648" data-artboard-height-res-960="460" data-artboard-proxy-min-offset-top="0" data-artboard-proxy-min-height="560" data-artboard-proxy-max-height="560"><div class="t396__carrier t-bgimg loaded" data-artboard-recid="779059872" data-original="images/pbc-background.png" style="background-image: url(&quot;images/pbc-background.png&quot;);"></div><div class="t396__filter" data-artboard-recid="779059872"></div><div class="t396__elem tn-elem tn-elem__7790598721536161772606" data-elem-id="1536161772606" data-elem-type="text" data-field-top-value="145" data-field-left-value="20" data-field-width-value="490" data-field-axisy-value="top" data-field-axisx-value="left" data-field-container-value="grid" data-field-topunits-value="px" data-field-leftunits-value="px" data-field-heightunits-value="" data-field-widthunits-value="px" data-field-top-res-320-value="30" data-field-left-res-320-value="70" data-field-width-res-320-value="180" data-field-top-res-480-value="30" data-field-left-res-480-value="120" data-field-width-res-480-value="240" data-field-top-res-640-value="30" data-field-left-res-640-value="198" data-field-width-res-640-value="244" data-field-top-res-960-value="120" data-field-left-res-960-value="10" data-field-width-res-960-value="242" data-fields="top,left,width,container,axisx,axisy,widthunits,leftunits,topunits" style="top: 145px; left: 509px; width: 490px;"><div class="tn-atom" field="tn_text_1536161772606" style="line-height: 47px;">Центр ценовых<br>индексов (ЦЦИ)</div> </div><div class="t396__elem tn-elem tn-elem__7790598721536161805326" data-elem-id="1536161805326" data-elem-type="text" data-field-top-value="259" data-field-left-value="20" data-field-width-value="470" data-field-axisy-value="top" data-field-axisx-value="left" data-field-container-value="grid" data-field-topunits-value="px" data-field-leftunits-value="px" data-field-heightunits-value="" data-field-widthunits-value="px" data-field-top-res-320-value="105" data-field-left-res-320-value="22" data-field-width-res-320-value="276" data-field-top-res-480-value="127" data-field-left-res-480-value="50" data-field-width-res-480-value="380" data-field-top-res-640-value="127" data-field-left-res-640-value="122" data-field-width-res-640-value="396" data-field-top-res-960-value="217" data-field-left-res-960-value="10" data-field-width-res-960-value="426" data-fields="top,left,width,container,axisx,axisy,widthunits,leftunits,topunits" style="top: 259px; left: 509px; width: 470px;"><div class="tn-atom" field="tn_text_1536161805326" style="line-height: 24px;">Российское ценовое агентство. Оперативно публикуем цены на товары российского экспорта и логистику.</div> </div><div class="t396__elem tn-elem tn-elem__7790598721536162004763" data-elem-id="1536162004763" data-elem-type="image" data-field-top-value="-1" data-field-left-value="639" data-field-width-value="561" data-field-axisy-value="top" data-field-axisx-value="left" data-field-container-value="grid" data-field-topunits-value="px" data-field-leftunits-value="px" data-field-heightunits-value="" data-field-widthunits-value="px" data-field-filewidth-value="670" data-field-fileheight-value="670" data-field-top-res-320-value="271" data-field-left-res-320-value="10" data-field-width-res-320-value="300" data-field-top-res-480-value="271" data-field-left-res-480-value="40" data-field-width-res-480-value="400" data-field-top-res-640-value="271" data-field-left-res-640-value="147" data-field-width-res-640-value="347" data-field-top-res-960-value="0" data-field-left-res-960-value="500" data-field-width-res-960-value="460" data-fields="img,width,filewidth,fileheight,top,left,container,axisx,axisy,widthunits,leftunits,topunits" style="left: 1128px; top: -1px; width: 561px;"><div class="tn-atom"><img class="tn-atom__img t-img loaded" data-original="images/pbc-picture.png" alt="" imgfield="tn_img_1536162004763" src="images/pbc-picture.png"></div></div><div class="t396__elem tn-elem tn-elem__7790598721723111226021" data-elem-id="1723111226021" data-elem-type="button" data-field-top-value="327" data-field-left-value="20" data-field-height-value="55" data-field-width-value="200" data-field-axisy-value="top" data-field-axisx-value="left" data-field-container-value="grid" data-field-topunits-value="px" data-field-leftunits-value="px" data-field-heightunits-value="px" data-field-widthunits-value="px" data-field-top-res-320-value="186" data-field-left-res-320-value="60" data-field-top-res-480-value="186" data-field-left-res-480-value="140" data-field-top-res-640-value="186" data-field-left-res-640-value="220" data-field-top-res-960-value="276" data-field-left-res-960-value="10" data-fields="top,left,width,height,container,axisx,axisy,caption,leftunits,topunits" style="top: 327px; left: 509px; width: 200px; height: 55px;"><a class="tn-atom" href="#rec780972521">Узнать подробнее</a></div></div> </div>
```


### [Актуальное]{.my-custom-class style="color:#2455D8;"}

Пятница с ЦЦИ: зерно – 13 сентября в 15:00. [Регистрация →](events.qmd)

Пятница с ЦЦИ: перевозки нефти – 13 сентября в 10-00. [Регистрация →](events.qmd)

ЦЦИ начал публиковать индексы на российскую морскую логистику →


------------------------------------------------------------------------

### [Индекс сырьевых цен ЦЦИ]{.my-custom-class style="color:#2455D8;"} &nbsp; &nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; [→](pbc-index.qmd)


**Индекс сырьевых цен ЦЦИ/ PBC Commodity Index** -- сводный индекс цен российского сырьевого экспорта. Отражает изменение цен на товары российского сырьевого экспорта по сравнению с уровнем января 2022 г.

```{r, warning = FALSE, echo = FALSE, message = FALSE}

library(openxlsx)
library(highcharter)
library(tidyr)
library(magrittr)

colors = c("#2354d6", "#FF9500", '#82096c', '#d1e5ff', '#44bf78', '#f6514c', '#c3b0ef')

# прочитать и преобразовать файл Excel с данными

df  <- read.xlsx('ЦЦИ Сырьевой индекс.xlsx', sheet = 1, detectDates = TRUE)

df_index = df[1,]
#df = df[,-1]
#df[,2:3] <- NULL 
names(df_index)[1] <- "index"

df_index <- df_index %>% pivot_longer(!index, names_to = "date", values_to = 'value')
df_index$date <- as.Date(df_index$date)

#df = df[df$index == "ЦИндекс сырьевых цен ЦЦИ, 01.2022=100",]
df_index$index = 'Индекс сырьевых цен ЦЦИ, янв. 2022 = 100'
df_index$value <- round(df_index$value,2)

# прочитать файл с курсом

# df2  <- read.xlsx('rub-usd.xlsx', sheet = 1, detectDates = TRUE)
# df2 <- df2[df2$date > min(df$date),]
df_usdrub = df[2,]
names(df_usdrub)[1] <- 'index'

df_usdrub <- df_usdrub %>% pivot_longer(!index, names_to = "date", values_to = 'value')
df_usdrub$date <- as.Date(df_usdrub$date)

df_usdrub$index = 'USD/RUB, рублей за доллар'
df_usdrub$value <- round(df_usdrub$value,2)

# Non-oil index

df_noil_index = df[4,]
names(df_noil_index)[1] <- 'index'

df_noil_index <- df_noil_index %>% pivot_longer(!index, names_to = "date", values_to = 'value')
df_noil_index$date <- as.Date(df_noil_index$date)

df_noil_index$index = 'Индекс сырьевых цен ненефтяного экспорта, янв. 2022 = 100'
df_noil_index$value <- round(df_noil_index$value,2)

# Fossil fuel index

df_fuel_index = df[6,]
names(df_fuel_index)[1] <- 'index'

df_fuel_index <- df_fuel_index %>% pivot_longer(!index, names_to = "date", values_to = 'value')
df_fuel_index$date <- as.Date(df_fuel_index$date)

df_fuel_index$index = 'Индекс цен на товары ТЭК, янв. 2022 = 100'
df_fuel_index$value <- round(df_fuel_index$value,2)

# Agro index

df_agro_index = df[7,]
names(df_agro_index)[1] <- 'index'

df_agro_index <- df_agro_index %>% pivot_longer(!index, names_to = "date", values_to = 'value')
df_agro_index$date <- as.Date(df_agro_index$date)

df_agro_index$index = 'Индекс цен на агротовары, янв. 2022 = 100'
df_agro_index$value <- round(df_agro_index$value,2)

# Fertilizers index

df_fert_index = df[8,]
names(df_fert_index)[1] <- 'index'

df_fert_index <- df_fert_index %>% pivot_longer(!index, names_to = "date", values_to = 'value')
df_fert_index$date <- as.Date(df_fert_index$date)

df_fert_index$index = 'Индекс цен на удобрения, янв. 2022 = 100'
df_fert_index$value <- round(df_fert_index$value,2)


# построить график highcharts 

index_plot <- highchart() %>% 
   hc_xAxis(type = "datetime") %>%
   hc_exporting(enabled = TRUE) %>% 
   hc_yAxis_multiples(
      list(title = list(text = "Индекс сырьевых цен ЦЦИ, янв. 2022 = 100"), showFirstLabel = TRUE, max = 150, showLastLabel=TRUE,opposite = FALSE),
      list(title = list(text = "USD/RUB, рублей за доллар"), showLastLabel = FALSE, opposite = TRUE, reversed = TRUE)) %>%
   hc_add_series(df_index,type="line", hcaes(x = date, y = value, group=index), color = colors[1]) %>% 
   hc_add_series(df_noil_index,type="line", hcaes(x = date, y = value, group=index), color = colors[3], visible = TRUE) %>%
   hc_add_series(df_fuel_index,type="line", hcaes(x = date, y = value, group=index), color = colors[7], visible = FALSE) %>%
   hc_add_series(df_agro_index,type="line", hcaes(x = date, y = value, group=index), color = colors[6], visible = FALSE) %>%
   hc_add_series(df_fert_index,type="line", hcaes(x = date, y = value, group=index), color = colors[5], visible = FALSE) %>%
   hc_add_series(df_usdrub,type="line", hcaes(x = date, y = value, group=index), color = colors[2],  yAxis=1, visible = FALSE)

# поменять названия месяцев на русские. по умолчанию - на английском
index_plot$x$conf_opts$lang$months = c("Январь"	,"Февраль",	"Март"	,"Апрель"	,"Май",	"Июнь", "Июль",	"Август",	"Сентябрь",	"Октябрь",	"Ноябрь",	"Декабрь")
index_plot$x$conf_opts$lang$shortMonths = c("Янв", 	"Фев",	"Мар",	"Апр",	"Май",	"Июн",	"Июл",	"Авг",	"Сен",	"Окт",	"Ноя",	"Дек")

index_plot 

```

<!-- [Мониторинг - Июль 2024](2024-07-cci-index.pdf) -->
<!-- Методология расчета индекса доступна [здесь](PBC%20Commodity%20Index%20-%20methodology.pdf). -->
<!-- {{< video https://youtu.be/l83Z-fwugZg?si=jAPUwXqpd_VyZCQQ >}} -->
<!-- {{< video https://youtu.be/fxT6yOeWAxw?si=6G1Xmflw7FWXiPFu >}} -->
